<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>航天时代</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- space canvas will be placed inside .map-area for tighter layout -->

  <div class="app">
    <main class="main">
      <section class="map-area">
        <canvas id="space-canvas" width="800" height="400"></canvas>
        <div class="hover-tip" id="hoverTip"></div>
        <div id="yearControls" style="position:absolute;left:50%;bottom:18px;transform:translateX(-50%);display:flex;align-items:center;gap:10px;background:rgba(6,14,26,0.72);color:#e9f3ff;border:1px solid rgba(125,227,255,0.2);padding:8px 12px;border-radius:10px;box-shadow:0 10px 24px rgba(0,0,0,0.35);z-index:6;">
          <div style="font-size:13px">年份：<span id="year"></span></div>
          <button id="next-year" style="padding:6px 10px;border-radius:6px;border:none;background:#0ea5a4;color:#001;cursor:pointer;">进入下一年</button>
        </div>
      </section>
    </main>

    <section class="company-panel" id="companyPanel">
      <div class="company-info">
        <div class="company-title">蓝箭航天（本公司）</div>
        <div class="company-subtitle">蓝箭航天：聚焦中小型运载火箭与快速发射，适合稳健发展。</div>
      </div>
      <div class="company-actions" id="companyActions">
        <div id="companyStats" style="margin-top:8px;color:#dfefff;font-size:13px">请选择起始支持者以查看公司简介与初始资源。</div>
      </div>
    </section>

      <!-- reward modal: shows a space photo and a short philosophical text when construction completes -->
      <div id="rewardModal" class="reward-modal" role="dialog" aria-hidden="true">
        <div class="reward-dialog" role="document">
          <button id="rewardClose" class="reward-close" aria-label="关闭">✕</button>
          <div class="reward-title">建设完成 — 奖励已解锁</div>
          <div class="stage-visual" id="rewardImageWrapper">
            <img id="rewardImage" src="" alt="太空照片" style="width:100%;height:100%;object-fit:cover;border-radius:8px;display:block" />
          </div>
          <div class="reward-text" id="rewardText">这里将显示一段哲学文字，用以激励你继续拓展航线与想象。</div>
          <div style="text-align:center;margin-top:6px">
            <button id="rewardAction" class="reward-action">继续</button>
          </div>
        </div>
      </div>

    <!-- start modal: choose starting backing -->
    <div id="startModal" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:10020">
      <div style="background:#071227;color:#fff;padding:18px;border-radius:10px;max-width:1180px;width:96%;box-shadow:0 12px 36px rgba(0,0,0,0.6);display:flex;gap:12px;align-items:center;">
        <img src="https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=1200&h=700&fit=crop" alt="start" style="width:58%;border-radius:8px;object-fit:cover;max-height:420px"/>
        <div style="flex:1;padding-left:8px;">
          <h2 style="margin:0 0 8px 0;color:#46c0ff">选择你初始国家，开始你的太空之旅</h2>
          <p style="margin:0 0 12px 0;line-height:1.4;opacity:0.92">我们第一次从太空俯视自己的家园，城市的灯光像一层薄薄的霜，文明在黑暗的背景上显得格外脆弱。</p>

          <div style="display:flex;flex-direction:column;gap:8px">
            <button id="start_us" style="padding:10px;border-radius:6px;border:none;background:#06b6d4;color:#001;">美国 — 资金 1000 亿，机器人 100 万 (vip) </button>
            <button id="start_ru" style="padding:10px;border-radius:6px;border:none;background:#ef4444;color:#001;">俄罗斯 — 资金 300 亿，机器人 20 万</button>
            <button id="start_cn" style="padding:10px;border-radius:6px;border:none;background:#0ea5a4;color:#001;">中国 — 资金 200 亿，机器人 15 万  （独有事件链）</button>
            <button id="start_de" style="padding:10px;border-radius:6px;border:none;background:#f59e0b;color:#001;">德国 — 资金 120 亿，机器人 8 万</button>
            <button id="start_in" style="padding:10px;border-radius:6px;border:none;background:#22c55e;color:#001;">印度 — 资金 80 亿，机器人 6 万  （独有事件链） </button>
          </div>
        </div>
      </div>
    </div>

    <div id="bottom-panel" class="bottom-panel">
      <div class="bp-left">
        <div>资金：<span id="money"></span></div>
        <div>航线数：<span id="route-count"></span></div>
        <div id="buildArea" style="margin-top:10px">
          <div style="font-size:13px;color:#dfefff;margin-bottom:6px">地月扩张进度（点击填满）：</div>
          <div id="buildBar" style="width:100%;height:14px;background:#122233;border-radius:8px;cursor:pointer;overflow:hidden">
            <div id="buildBarInner" style="width:0%;height:100%;background:linear-gradient(90deg,#46c0ff,#0ea5a4);transition:width 120ms ease"></div>
          </div>
          <div id="buildHint" style="font-size:12px;color:#cfe;margin-top:6px">点击进度条进行建设，进度满了将尝试开通新航线（需要足够资金）。</div>
        </div>
        <!-- event choices overlay (filled dynamically) -->
        <div id="eventChoices" style="display:none;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:rgba(8,18,28,0.96);color:#fff;padding:14px;border-radius:8px;z-index:10010;max-width:92%;width:420px;box-shadow:0 10px 30px rgba(0,0,0,0.6)"></div>
      </div>

      <div class="bp-right">
        <div class="news" id="news">
          <h4>新闻</h4>
          <div id="newsList"></div>
        </div>

        <div class="history" id="history">
          <h4>历史资金（最近 5 年）</h4>
          <canvas id="historyChart" width="360" height="96" style="width:100%;max-width:360px;height:96px;border-radius:6px;background:transparent"></canvas>
          <div id="historyList"></div>
        </div>
      </div>
    </div>
  </div>

  <section id="civRank" style="position:fixed;right:14px;bottom:110px;background:rgba(8,18,28,0.86);color:#e8f2ff;padding:8px 10px;border-radius:8px;border:1px solid rgba(125,227,255,0.18);box-shadow:0 8px 20px rgba(0,0,0,0.35);font-size:12px;max-width:220px;z-index:10005;">
    <div style="font-weight:700;color:#7de3ff;margin-bottom:6px;letter-spacing:0.5px">文明排行榜</div>
    <div style="line-height:1.35">1. 美国联盟：月面人口 12,000，航线 18 条</div>
  </section>

  <script src="main.js"></script>
  <script src="game.js"></script>

<!-- 地月文明数据库区域开始 -->
<section id="database" style="margin:18px 12px;padding:12px;border:2px solid rgba(143,182,255,0.06);border-radius:8px;background:linear-gradient(180deg,rgba(5,12,26,0.6),rgba(3,8,18,0.6));color:#dfefff">
  <h2 style="margin:0 0 10px 0;color:#7de3ff">地月文明数据库</h2>

  <div class="db-grid" style="display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));">
    <!-- 股票面板 -->
    <div class="db-card" id="db-stocks" style="padding:10px;border-radius:8px;background:rgba(10,20,36,0.35);">
      <h3 style="margin:0 0 8px 0;color:#acd7ff">航天相关股票指数</h3>
      <table style="width:100%;border-collapse:collapse;font-size:13px;color:#e7f0ff">
        <tr><th style="text-align:left;padding:6px">代码</th><th style="text-align:left;padding:6px">名称</th><th style="text-align:right;padding:6px">价格</th><th style="text-align:right;padding:6px">涨跌</th></tr>
        <tr><td style="padding:6px">688698</td><td style="padding:6px">蓝箭航天（科创板待上市）</td><td style="padding:6px;text-align:right">102.3</td><td style="padding:6px;text-align:right;color:#7ef08a">+1.8%</td></tr>
        <tr><td style="padding:6px">00031.HK</td><td style="padding:6px">中国航天国际控股</td><td style="padding:6px;text-align:right">7.68</td><td style="padding:6px;text-align:right;color:#ff8a8a">-0.3%</td></tr>
        <tr><td style="padding:6px">SPCE</td><td style="padding:6px">Virgin Galactic（美股）</td><td style="padding:6px;text-align:right">1.80</td><td style="padding:6px;text-align:right;color:#7ef08a">+2.5%</td></tr>
        <tr><td style="padding:6px">RKLB</td><td style="padding:6px">Rocket Lab USA（美股）</td><td style="padding:6px;text-align:right">4.50</td><td style="padding:6px;text-align:right;color:#7ef08a">+0.9%</td></tr>
        <tr><td style="padding:6px">NOC</td><td style="padding:6px">Northrop Grumman（美股）</td><td style="padding:6px;text-align:right">480.6</td><td style="padding:6px;text-align:right;color:#7ef08a">+0.4%</td></tr>
        <tr><td style="padding:6px">LMT</td><td style="padding:6px">Lockheed Martin（美股）</td><td style="padding:6px;text-align:right">455.2</td><td style="padding:6px;text-align:right;color:#ff8a8a">-0.2%</td></tr>
        <tr><td style="padding:6px">UFO</td><td style="padding:6px">Procure Space ETF（美股太空 ETF）</td><td style="padding:6px;text-align:right">37.6</td><td style="padding:6px;text-align:right;color:#7ef08a">+0.6%</td></tr>
        <tr><td style="padding:6px">XAR</td><td style="padding:6px">SPDR S&P 航空航天防务 ETF</td><td style="padding:6px;text-align:right">130.4</td><td style="padding:6px;text-align:right;color:#7ef08a">+0.3%</td></tr>
      </table>
    </div>

    <!-- 机器人产能面板 -->
    <div class="db-card" id="db-robots" style="padding:10px;border-radius:8px;background:rgba(10,20,36,0.35);">
      <h3 style="margin:0 0 8px 0;color:#acd7ff">机器人产能</h3>
      <table style="width:100%;border-collapse:collapse;font-size:13px;color:#e7f0ff">
        <tr><th style="text-align:left;padding:6px">基地</th><th style="text-align:left;padding:6px">型号</th><th style="text-align:right;padding:6px">年产量</th><th style="text-align:right;padding:6px">在役数量</th></tr>
        <tr><td style="padding:6px">地球工厂 A</td><td style="padding:6px">R-1 装配机器人</td><td style="padding:6px;text-align:right">1,000 台</td><td style="padding:6px;text-align:right">10,000 台</td></tr>
        <tr><td style="padding:6px">月面工厂 α</td><td style="padding:6px">L-3 采矿机器人</td><td style="padding:6px;text-align:right">100 台</td><td style="padding:6px;text-align:right">500 台</td></tr>
      </table>
    </div>

    <!-- 电力产能面板 -->
    <div class="db-card" id="db-power" style="padding:10px;border-radius:8px;background:rgba(10,20,36,0.35);">
      <h3 style="margin:0 0 8px 0;color:#acd7ff">电力产能</h3>
      <table style="width:100%;border-collapse:collapse;font-size:13px;color:#e7f0ff">
        <tr><th style="text-align:left;padding:6px">区域</th><th style="text-align:left;padding:6px">电站类型</th><th style="text-align:right;padding:6px">装机容量</th><th style="text-align:right;padding:6px">状态</th></tr>
        <tr><td style="padding:6px">地球低轨</td><td style="padding:6px">空间太阳能电站阵列</td><td style="padding:6px;text-align:right">10 GW</td><td style="padding:6px;text-align:right;color:#7ef08a">运行</td></tr>
        <tr><td style="padding:6px">月球极区</td><td style="padding:6px">核裂变电站</td><td style="padding:6px;text-align:right">2 GW</td><td style="padding:6px;text-align:right;color:#7ef08a">运行</td></tr>
        <tr><td style="padding:6px">月球赤道</td><td style="padding:6px">光伏农场</td><td style="padding:6px;text-align:right">0.5 GW</td><td style="padding:6px;text-align:right;color:#ffd28a">建设中</td></tr>
      </table>
    </div>

    <!-- 城市与公司面板 -->
    <div class="db-card" id="db-cities" style="padding:10px;border-radius:8px;background:rgba(10,20,36,0.35);">
      <h3 style="margin:0 0 8px 0;color:#acd7ff">地球与月球城市网络</h3>
      <table style="width:100%;border-collapse:collapse;font-size:13px;color:#e7f0ff">
        <tr><th style="text-align:left;padding:6px">城市/基地</th><th style="text-align:left;padding:6px">类型</th><th style="text-align:left;padding:6px">驻场公司</th><th style="text-align:left;padding:6px">功能</th></tr>
        <tr><td style="padding:6px">武汉</td><td style="padding:6px">地球航天港</td><td style="padding:6px">蓝剑航天</td><td style="padding:6px">地月客运枢纽</td></tr>
        <tr><td style="padding:6px">圣保罗</td><td style="padding:6px">地球航天港</td><td style="padding:6px">联合航天集团</td><td style="padding:6px">货运与补给</td></tr>
        <tr><td style="padding:6px">月港一号</td><td style="padding:6px">月球轨道站</td><td style="padding:6px">多家公司</td><td style="padding:6px">中转 / 旅游</td></tr>
        <tr><td style="padding:6px">月面极区基地</td><td style="padding:6px">月球基地</td><td style="padding:6px">矿业联合体</td><td style="padding:6px">采矿 / 电力</td></tr>
      </table>
    </div>
  </div>
</section>
<!-- 地月文明数据库区域结束 -->

    <div id="feedback" style="margin:12px 16px;padding:10px 12px;border-top:1px dashed rgba(200,220,255,0.06);font-size:13px;color:#dfefff;display:flex;align-items:center;gap:8px;justify-content:flex-end">
      <span style="opacity:0.9">游戏反馈：</span>
      <a href="mailto:holyspiritgodsky@gmail.com" style="color:#7de3ff;text-decoration:underline">holyspiritgodsky@gmail.com</a>
      <span style="opacity:0.75">·</span>
      <a href="tel:15221056162" style="color:#7de3ff;text-decoration:underline">15221056162</a>
    </div>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>âš¡ğŸ¤– Economic Power Index | ç»æµäº§å‡ºæ¨¡æ‹Ÿå™¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      color: #fff;
      overflow-x: hidden;
    }

    /* Navbar */
    .navbar {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      padding: 16px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .navbar-brand {
      font-size: 1.5rem;
      font-weight: 800;
    }

    .nav-right {
      display: flex;
      gap: 16px;
      align-items: center;
    }

    .lang-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
      padding: 6px 14px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 600;
    }

    .lang-btn.active {
      background: #ff6b6b;
      border-color: #ff6b6b;
    }

    .lang-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Hero */
    .hero {
      text-align: center;
      padding: 60px 24px;
      background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(74, 144, 226, 0.2) 100%);
    }

    .hero h1 {
      font-size: 2.8rem;
      margin-bottom: 16px;
      font-weight: 800;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .hero-formula {
      font-size: 1.2rem;
      color: #ffeb3b;
      font-weight: 600;
      letter-spacing: 1px;
      margin-bottom: 20px;
    }

    .hero p {
      font-size: 1.1rem;
      color: #ccc;
      opacity: 0.9;
    }

    /* Container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Section */
    .section {
      margin: 60px 0;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 32px;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .section-title::before {
      content: '';
      display: inline-block;
      width: 4px;
      height: 32px;
      background: linear-gradient(180deg, #ff6b6b, #4a90e2);
      border-radius: 2px;
    }

    /* Card Grid */
    .country-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    .country-card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 24px;
      backdrop-filter: blur(10px);
      transition: all 0.3s cubic-bezier(0.4, 2, 0.4, 0.8);
      cursor: pointer;
    }

    .country-card:hover {
      transform: translateY(-8px);
      border-color: rgba(255, 255, 255, 0.3);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
      box-shadow: 0 12px 24px rgba(255, 107, 107, 0.2);
    }

    .country-flag {
      font-size: 2.4rem;
      margin-bottom: 12px;
    }

    .country-name {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .metric {
      margin-bottom: 20px;
    }

    .metric-label {
      font-size: 0.9rem;
      color: #bbb;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .metric-value {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .metric-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
    }

    .metric-bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 1s ease-out;
      background: linear-gradient(90deg, #ff6b6b, #ffb347);
    }

    .metric-bar-fill.robot {
      background: linear-gradient(90deg, #4a90e2, #7c3aed);
    }

    .metric-growth {
      font-size: 0.85rem;
      color: #4ade80;
      margin-top: 6px;
      font-weight: 600;
    }

    .metric-growth.negative {
      color: #f87171;
    }

    /* Charts */
    .chart-container {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 24px;
      backdrop-filter: blur(10px);
      margin-bottom: 40px;
    }

    .chart-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 20px;
    }

    #powerChart, #robotChart, #outputChart {
      width: 100%;
      height: 400px;
    }

    /* Scenario Slider */
    .scenario-box {
      background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(74, 144, 226, 0.1));
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      padding: 16px;
      margin: 40px 0;
      text-align: center;
    }

    .scenario-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .slider-group {
      margin-bottom: 12px;
    }

    .slider-label {
      font-size: 0.85rem;
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .slider-value {
      font-size: 1.2rem;
      font-weight: 700;
      color: #ffeb3b;
    }

    input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff6b6b, #ffb347);
      cursor: pointer;
      transition: all 0.2s;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff6b6b, #ffb347);
      cursor: pointer;
      border: none;
    }

    /* Output Projection */
    .output-projection {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 24px;
    }

    .output-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }

    .output-card-country {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .output-card-value {
      font-size: 2rem;
      font-weight: 800;
      color: #ffeb3b;
      margin-bottom: 8px;
    }

    .output-card-label {
      font-size: 0.9rem;
      color: #bbb;
    }

    /* Footer */
    .footer {
      background: rgba(0, 0, 0, 0.3);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding: 32px 0;
      margin-top: 80px;
      text-align: center;
      color: #aaa;
    }

    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }
      .country-grid {
        grid-template-columns: 1fr;
      }
      #powerChart, #robotChart, #outputChart {
        height: 300px;
      }
    }

    .price-insight {
      font-size: 0.8rem;
      color: #ffeb3b;
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid rgba(255, 235, 59, 0.3);
      line-height: 1.4;
    }

    .story-card {
      background: rgba(255,255,255,0.05);
      border-left: 4px solid #ffeb3b;
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 12px;
      font-size: 0.9rem;
      color: #ddd;
      line-height: 1.5;
    }

    .chart-subtitle {
      font-size: 0.9rem;
      color: #bbb;
      margin-top: 8px;
      font-weight: 400;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <div class="navbar-brand">âš¡ğŸ¤– Economic Power Index</div>
    <div class="nav-right">
      <a href="index.html" style="color: #fff; text-decoration: none; margin-right: 16px;">â† Back</a>
      <button class="lang-btn active" onclick="switchLang('en')">EN</button>
      <button class="lang-btn" onclick="switchLang('zh')">ä¸­</button>
    </div>
  </div>

  <div class="container">
    <!-- Charts Section -->
    <div class="section">
      <div class="section-title" id="charts_title">ğŸ“Š Comparative Analysis</div>
      
      <!-- Charts -->
      <div class="chart-container">
        <div class="chart-title" id="power_chart_title">Power Capacity Comparison</div>
        <div class="chart-subtitle">ç”µåŠ›äº§èƒ½å†³å®š AIã€å……ç”µæ¡©ã€å·¥å‚çš„äº§é‡ä¸Šé™ã€‚ä¸­å›½ç”µåŠ›æœ€ä¸°å¯Œï¼Œæˆæœ¬æœ€ä½ã€‚</div>
        <div id="powerChart"></div>
      </div>

      <!-- Power Story Cards -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; margin-bottom: 24px; margin-top: 12px;">
        <div class="story-card">
          âš¡ <strong>ç”µåŠ›è¶Šå¤š â†’ ç”µä»·è¶Šç¨³</strong><br>
          å……è¶³çš„ç”µåŠ›ä¾›åº”è®©ç”µç½‘æ›´ç¨³å®šï¼Œç”µä»·ä¸‹é™ï¼Œå·¥å‚æ•¢å¤§èƒ†æŠ•èµ„ã€‚
        </div>
        <div class="story-card">
          ğŸ‡¨ğŸ‡³ <strong>ä¸­å›½ç”µåŠ›é«˜+ä¾¿å®œ</strong><br>
          2500GWäº§èƒ½å…¨çƒæœ€å¤šï¼Œç”µä»·0.68Â¥/kWhå…¨çƒæœ€ä½ã€‚AIã€æœºå™¨äººã€ç”µåŠ¨è½¦æˆæœ¬ä¼˜åŠ¿æ˜æ˜¾ã€‚
        </div>
        <div class="story-card">
          ğŸ­ <strong>å……è¶³ç”µåŠ›å¸å¼•æŠ•èµ„</strong><br>
          å……ç”µæ¡©ã€AIæ•°æ®ä¸­å¿ƒã€å·¥ä¸šæœºå™¨äººå·¥å‚éƒ½æ¶Œå‘ç”µåŠ›å……è¶³çš„åœ°æ–¹ã€‚
        </div>
      </div>

      <!-- Per-Capita Price Display -->
      <div style="background: linear-gradient(135deg, rgba(255, 235, 59, 0.15), rgba(255, 235, 59, 0.05)); border: 1px solid rgba(255, 235, 59, 0.3); border-radius: 16px; padding: 24px; margin-bottom: 32px;">
        <h3 style="margin-bottom: 20px; font-weight: 700;">ğŸ’¡ å®æ—¶ç”µä»·</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 20px;" id="priceGrid">
          <!-- Generated by JS -->
        </div>
      </div>



      <div class="chart-container">
        <div class="chart-title" id="robot_chart_title">Robot Count Comparison</div>
        <div class="chart-subtitle">å·¥ä¸šæœºå™¨äººæ•°é‡åæ˜ åˆ¶é€ ä¸šèƒ½åŠ›ã€‚æ—¥æœ¬æœºå™¨äººæœ€å¤šï¼ˆ390Kï¼‰ï¼Œä¸­å›½å¢é•¿æœ€å¿«ã€‚</div>
        <div id="robotChart"></div>
      </div>

      <!-- Robot Story Cards -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; margin-bottom: 24px; margin-top: 12px;">
        <div class="story-card">
          ğŸ¤– <strong>æœºå™¨äººè¶Šå¤š â†’ å•†å“è¶Šä¾¿å®œ</strong><br>
          è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜çš„åœ°æ–¹ï¼Œæ±½è½¦ã€èŠ¯ç‰‡ã€é›¶é…ä»¶æˆæœ¬æ›´ä½ï¼Œç«äº‰åŠ›æ›´å¼ºã€‚
        </div>
        <div class="story-card">
          ğŸ† <strong>æ—¥æœ¬æœºå™¨äººå¯†åº¦æœ€é«˜</strong><br>
          390Kæœºå™¨äººé©±åŠ¨ç²¾å¯†åˆ¶é€ ï¼Œè¿™å°±æ˜¯æ—¥æœ¬æ±½è½¦ã€ç”µå­äº§å“è´µä½†å¥½ç”¨çš„åŸå› ã€‚
        </div>
        <div class="story-card">
          ğŸ“ˆ <strong>ä¸­å›½æœºå™¨äººå¢é€Ÿæœ€å¿«</strong><br>
          + 30% çš„å¢é€Ÿï¼Œæˆæœ¬ä½+æŠ•èµ„å¤§ = æœªæ¥åå¹´ä¸­å›½å·¥ä¸šå“ä»·æ ¼ä¼šæ›´æœ‰ç«äº‰åŠ›ã€‚
        </div>
      </div>
    </div>

    <!-- Scenario Simulator -->
    <div class="scenario-box">
      <div class="scenario-title" id="scenario_title">ï¿½ Economic Output Impact</div>
      <p style="margin-bottom: 24px; color: #bbb;" id="scenario_desc">æ¯æ·»åŠ è™šæ‹Ÿæ¡†æ¡†ï¼Œå„å›½äº§å‡ºä¼šå¦‚ä½•å˜åŒ–</p>

      <div class="output-projection" id="outputProjection">
        <!-- Generated by JS -->
      </div>

      <div class="chart-container" style="margin-top: 24px;">
        <div class="chart-title" id="output_chart_title">Projected Economic Output Index (Base: 100)</div>
        <div id="outputChart"></div>
      </div>
    </div>

    <!-- Insights -->
    <div class="section">
      <div class="section-title" id="insights_title">ğŸ’¡ Insights & Observations</div>
      <div class="country-grid">
        <div style="background: linear-gradient(135deg, rgba(255, 107, 107, 0.15), rgba(255, 107, 107, 0.05)); border: 1px solid rgba(255, 107, 107, 0.3); border-radius: 16px; padding: 24px;">
          <div style="font-size: 1.8rem; margin-bottom: 12px;">âš¡</div>
          <h3 style="margin-bottom: 12px;" id="insight1_title">Power is Bottleneck</h3>
          <p style="color: #ccc; font-size: 0.95rem; line-height: 1.6;" id="insight1_desc">AI data centers consume exponentially. A 1GW facility â‰ˆ 1 million households. Power growth may lag robot deployment.</p>
        </div>
        <div style="background: linear-gradient(135deg, rgba(74, 144, 226, 0.15), rgba(74, 144, 226, 0.05)); border: 1px solid rgba(74, 144, 226, 0.3); border-radius: 16px; padding: 24px;">
          <div style="font-size: 1.8rem; margin-bottom: 12px;">ğŸ¤–</div>
          <h3 style="margin-bottom: 12px;" id="insight2_title">Robot Acceleration</h3>
          <p style="color: #ccc; font-size: 0.95rem; line-height: 1.6;" id="insight2_desc">China & US competing in robot/AI race. Tesla Solo robots, Boston Dynamics, humanoids could hit millions in 5 years.</p>
        </div>
        <div style="background: linear-gradient(135deg, rgba(123, 58, 237, 0.15), rgba(123, 58, 237, 0.05)); border: 1px solid rgba(123, 58, 237, 0.3); border-radius: 16px; padding: 24px;">
          <div style="font-size: 1.8rem; margin-bottom: 12px;">ğŸ“ˆ</div>
          <h3 style="margin-bottom: 12px;" id="insight3_title">Economic Divergence</h3>
          <p style="color: #ccc; font-size: 0.95rem; line-height: 1.6;" id="insight3_desc">Countries with electricity + robots grow 2-3x faster. Energy policy becomes geopolitical. This will reshape global GDP.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p id="footer_text">Â© 2026 Economic Power Index | Data: IEA, IFR, IMF 2025-2026</p>
  </div>

  <script>
    // Data: Countries with their current power capacity (GW), robots, and growth rates
    const countriesData = [
      {
        name: 'China',
        flag: 'ğŸ‡¨ğŸ‡³',
        power: 2500,
        powerGrowth: 15,
        robots: 380000,
        robotGrowth: 30,
        productivity: 1.0
      },
      {
        name: 'USA',
        flag: 'ğŸ‡ºğŸ‡¸',
        power: 1300,
        powerGrowth: 12,
        robots: 290000,
        robotGrowth: 22,
        productivity: 1.2
      },
      {
        name: 'EU',
        flag: 'ğŸ‡ªğŸ‡º',
        power: 1100,
        powerGrowth: 10,
        robots: 260000,
        robotGrowth: 18,
        productivity: 1.1
      },
      {
        name: 'Japan',
        flag: 'ğŸ‡¯ğŸ‡µ',
        power: 290,
        powerGrowth: 8,
        robots: 390000,
        robotGrowth: 20,
        productivity: 1.15
      },
      {
        name: 'India',
        flag: 'ğŸ‡®ğŸ‡³',
        power: 500,
        powerGrowth: 20,
        robots: 80000,
        robotGrowth: 35,
        productivity: 0.9
      },
      {
        name: 'Rest of World',
        flag: 'ğŸŒ',
        power: 1200,
        powerGrowth: 12,
        robots: 200000,
        robotGrowth: 25,
        productivity: 0.8
      }
    ];

    const langData = {
      en: {
        hero_title: 'âš¡ğŸ¤– Economic Output Simulator',
        hero_desc: 'Based on Elon Musk\'s economic formula',
        power_title: 'âš¡ Global Electricity Capacity',
        robot_title: 'ğŸ¤– Industrial Robotics Count',
        charts_title: 'ğŸ“Š Comparative Analysis',
        power_chart_title: 'Power Capacity Comparison (GW)',
        robot_chart_title: 'Robot Count Comparison (units)',
        scenario_title: 'ğŸ”® Future Economic Output Projection (Year 2027)',
        scenario_desc: 'Adjust growth rates to simulate different scenarios',
        power_growth_label: 'Global Power Growth',
        robot_growth_label: 'Global Robot Growth',
        productivity_label: 'Avg Robot Productivity Growth',
        output_chart_title: 'Projected Economic Output Index (Base: 100)',
        insights_title: 'ğŸ’¡ Insights & Observations',
        insight1_title: 'Power is Bottleneck',
        insight1_desc: 'AI data centers consume exponentially. A 1GW facility â‰ˆ 1 million households. Power growth may lag robot deployment.',
        insight2_title: 'Robot Acceleration',
        insight2_desc: 'China & US competing in robot/AI race. Tesla Solo robots, Boston Dynamics, humanoids could hit millions in 5 years.',
        insight3_title: 'Economic Divergence',
        insight3_desc: 'Countries with electricity + robots grow 2-3x faster. Energy policy becomes geopolitical. This will reshape global GDP.',
        footer_text: 'Â© 2026 Economic Power Index | Data: IEA, IFR, IMF 2025-2026',
        power_label: 'Current Power (GW)',
        power_future: 'Expected 2027 (GW)',
        robots_label: 'Current Robots',
        robots_future: 'Expected 2027',
        output_index: 'Output Index'
      },
      zh: {
        hero_title: 'âš¡ğŸ¤– ç»æµäº§å‡ºæ¨¡æ‹Ÿå™¨',
        hero_desc: 'åŸºäºé©¬æ–¯å…‹çš„ç»æµå…¬å¼',
        power_title: 'âš¡ å…¨çƒç”µåŠ›äº§èƒ½',
        robot_title: 'ğŸ¤– å·¥ä¸šæœºå™¨äººæ•°é‡',
        charts_title: 'ğŸ“Š 2026.1æœˆå…¨çƒç”µåŠ›äº§èƒ½å¯¹æ¯”',
        power_chart_title: 'ç”µåŠ›äº§èƒ½å¯¹æ¯” (GW)',
        robot_chart_title: '2026.1æœˆå…¨çƒæœºå™¨äººæ•°é‡å¯¹æ¯” (å°)',
        scenario_title: 'ğŸ”® 2027å¹´ç»æµäº§å‡ºé¢„æµ‹',
        scenario_desc: 'è°ƒæ•´å¢é•¿ç‡æ¥æ¨¡æ‹Ÿä¸åŒæƒ…æ™¯',
        power_growth_label: 'å…¨çƒç”µåŠ›å¢é•¿',
        robot_growth_label: 'å…¨çƒæœºå™¨äººå¢é•¿',
        productivity_label: 'æœºå™¨äººç”Ÿäº§åŠ›å¢é•¿',
        output_chart_title: 'é¢„æœŸç»æµäº§å‡ºæŒ‡æ•° (åŸºæ•°: 100)',
        insights_title: 'ğŸ’¡ è§‚å¯Ÿ & å¯ç¤º',
        insight1_title: 'ç”µåŠ›æ˜¯ç“¶é¢ˆ',
        insight1_desc: 'AIæ•°æ®ä¸­å¿ƒè€—ç”µæŒ‡æ•°å¢é•¿ã€‚1GWè®¾æ–½ç›¸å½“äº100ä¸‡æˆ·å®¶åº­ç”¨ç”µã€‚ç”µåŠ›å¢é•¿å¯èƒ½è·Ÿä¸ä¸Šæœºå™¨äººéƒ¨ç½²é€Ÿåº¦ã€‚',
        insight2_title: 'æœºå™¨äººåŠ é€Ÿ',
        insight2_desc: 'ä¸­ç¾åœ¨æœºå™¨äºº/AIç«èµ›ä¸­ã€‚ç‰¹æ–¯æ‹‰Soloæœºå™¨äººã€æ³¢å£«é¡¿åŠ¨åŠ›ã€äººå½¢æœºå™¨äºº5å¹´å†…å¯èƒ½è¾¾åˆ°ç™¾ä¸‡çº§ã€‚',
        insight3_title: 'ç»æµåˆ†åŒ–',
        insight3_desc: 'æœ‰ç”µåŠ›å’Œæœºå™¨äººçš„å›½å®¶ç»æµå¢é€Ÿå¿«2-3å€ã€‚èƒ½æºæ”¿ç­–æˆä¸ºåœ°ç¼˜æ”¿æ²»ã€‚è¿™å°†é‡å¡‘å…¨çƒGDPæ ¼å±€ã€‚',
        footer_text: 'Â© 2026 ç»æµäº§å‡ºæŒ‡æ•° | æ•°æ®æ¥æº: IEAã€IFRã€IMF 2025-2026',
        power_label: 'å½“å‰ç”µåŠ› (GW)',
        power_future: 'é¢„æœŸ2027å¹´ (GW)',
        robots_label: 'å½“å‰æœºå™¨äºº',
        robots_future: 'é¢„æœŸ2027å¹´',
        output_index: 'äº§å‡ºæŒ‡æ•°'
      }
    };

    let currentLang = 'zh';  // Default to Chinese
    
    // Virtual framework tracking per country
    let virtualFrameworks = {};
    countriesData.forEach(c => {
      virtualFrameworks[c.name] = {
        power: 0,
        robots: 0
      };
    });
    
    // Virtual framework value multipliers
    const POWER_PER_FRAMEWORK = 500;    // 500 GW per framework
    const ROBOTS_PER_FRAMEWORK = 50000; // 50K robots per framework
    
    // Real electricity prices by country (Â¥/kWh) - 2025-2026 average
    const realElectricityPrices = {
      'China': 0.68,
      'USA': 0.95,
      'EU': 1.8,
      'Japan': 1.45,
      'India': 0.52,
      'Rest of World': 0.85
    };
    
    // Base car prices in Â¥ by country (for reference, will decrease with more robots)
    const baseCarPrices = {
      'China': 150000,
      'USA': 250000,
      'EU': 280000,
      'Japan': 280000,
      'India': 80000,
      'Rest of World': 200000
    };

    function switchLang(lang) {
      currentLang = lang;
      document.querySelectorAll('[id]').forEach(el => {
        const key = el.id;
        if (langData[lang][key]) {
          if (key.includes('title') || key.includes('label') || key.includes('desc') || key.includes('text')) {
            el.textContent = langData[lang][key];
          }
        }
      });
      updateCharts();
      updateScenario();
    }
    
    function addPowerFramework(countryName) {
      virtualFrameworks[countryName].power++;
      updateCharts();
      updateScenario();
    }
    
    function removePowerFramework(countryName) {
      if (virtualFrameworks[countryName].power > 0) {
        virtualFrameworks[countryName].power--;
        updateCharts();
        updateScenario();
      }
    }
    
    function addRobotFramework(countryName) {
      virtualFrameworks[countryName].robots++;
      updateCharts();
      updateScenario();
    }
    
    function removeRobotFramework(countryName) {
      if (virtualFrameworks[countryName].robots > 0) {
        virtualFrameworks[countryName].robots--;
        updateCharts();
        updateScenario();
      }
    }
    
    function getTotalPowerForCountry(country) {
      return country.power + (virtualFrameworks[country.name].power * POWER_PER_FRAMEWORK);
    }
    
    function getTotalRobotsForCountry(country) {
      return country.robots + (virtualFrameworks[country.name].robots * ROBOTS_PER_FRAMEWORK);
    }
    
    function getAdjustedElectricityPrice(country) {
      // Base real price
      const basePrice = realElectricityPrices[country.name];
      
      // Power reduces price (supply effect)
      const baseTotalPower = countriesData.reduce((a, c) => a + c.power, 0);
      const currentTotalPower = countriesData.reduce((a, c) => a + getTotalPowerForCountry(c), 0);
      const powerFactor = baseTotalPower / currentTotalPower;  // More power = lower factor = cheaper
      
      return (basePrice * powerFactor).toFixed(2);
    }
    
    function getAdjustedCarPrice(country) {
      // Base price
      const basePrice = baseCarPrices[country.name];
      
      // Robot productivity reduces car price (manufacturing efficiency)
      const baseTotalRobots = countriesData.reduce((a, c) => a + c.robots, 0);
      const currentTotalRobots = countriesData.reduce((a, c) => a + getTotalRobotsForCountry(c), 0);
      const robotFactor = baseTotalRobots / currentTotalRobots;  // More robots = cheaper
      
      return Math.round(basePrice * robotFactor);
    }
    
    function getPriceComparison(country) {
      // Compare with USA
      const currentPrice = parseFloat(getAdjustedElectricityPrice(country));
      const usaPrice = parseFloat(getAdjustedElectricityPrice(countriesData.find(c => c.name === 'USA')));
      const priceDiff = ((currentPrice - usaPrice) / usaPrice * 100).toFixed(1);
      const percentage = Math.abs(priceDiff);
      const relation = currentPrice < usaPrice ? 'ä¾¿å®œ' : 'è´µ';
      
      // Rough monthly savings for household (assuming 300 kWh/month)
      const monthlySavings = (usaPrice - currentPrice) * 300;
      
      return { percentage, relation, monthlySavings: Math.round(monthlySavings) };
    }

    function updateCharts() {
      // Update price display with per-country framework controls
      const priceGrid = document.getElementById('priceGrid');
      priceGrid.innerHTML = '';
      
      countriesData.forEach(country => {
        const electricityPrice = getAdjustedElectricityPrice(country);
        const carPrice = getAdjustedCarPrice(country);
        const powerFrameworkCount = virtualFrameworks[country.name].power || 0;
        const robotFrameworkCount = virtualFrameworks[country.name].robots || 0;
        const { percentage, relation, monthlySavings } = getPriceComparison(country);
        
        const priceCard = document.createElement('div');
        priceCard.style.cssText = 'background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 16px; border-radius: 10px;';
        priceCard.innerHTML = `
          <div style="font-size: 1.1rem; font-weight: 700; margin-bottom: 12px;">${country.flag} ${country.name}</div>
          
          <div style="margin-bottom: 14px; padding-bottom: 14px; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <div style="font-size: 0.8rem; color: #bbb; margin-bottom: 4px;">âš¡ ç”µä»·</div>
            <div style="font-size: 1.5rem; font-weight: 800; color: #ffeb3b;">${electricityPrice}Â¥/kWh</div>
            <div style="font-size: 0.75rem; color: #999; margin-top: 4px;">åŸºç¡€: ${realElectricityPrices[country.name]}Â¥</div>
            
            <div style="display: flex; gap: 8px; margin-top: 10px; justify-content: center; align-items: center;">
              <button onclick="removePowerFramework('${country.name}')" style="background: rgba(255, 107, 107, 0.3); border: 1px solid rgba(255, 107, 107, 0.5); color: #fff; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">âˆ’</button>
              <span style="min-width: 30px; text-align: center; color: #ff6b6b; font-weight: 700;">${powerFrameworkCount}</span>
              <button onclick="addPowerFramework('${country.name}')" style="background: rgba(255, 107, 107, 0.5); border: 1px solid rgba(255, 107, 107, 0.7); color: #fff; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">+</button>
              <span style="font-size: 0.7rem; color: #ff9999; margin-left: 4px; white-space: nowrap;">+500GW</span>
            </div>
            
            <div class="price-insight">
              æ¯”ç¾å›½${relation}${percentage}% ${monthlySavings > 0 ? `â€¢ å®¶åº­æ¯æœˆå°‘ä»˜çº¦${monthlySavings}å…ƒ` : `â€¢ å®¶åº­æ¯æœˆå¤šä»˜çº¦${Math.abs(monthlySavings)}å…ƒ`}
            </div>
          </div>
          
          <div>
            <div style="font-size: 0.8rem; color: #bbb; margin-bottom: 4px;">ğŸš— æ±½è½¦ä»·æ ¼</div>
            <div style="font-size: 1.4rem; font-weight: 800; color: #7c3aed;">${carPrice.toLocaleString()}Â¥</div>
            <div style="font-size: 0.75rem; color: #999; margin-top: 4px;">åŸºç¡€: ${baseCarPrices[country.name].toLocaleString()}Â¥</div>
            
            <div style="display: flex; gap: 8px; margin-top: 10px; justify-content: center; align-items: center;">
              <button onclick="removeRobotFramework('${country.name}')" style="background: rgba(124, 58, 237, 0.3); border: 1px solid rgba(124, 58, 237, 0.5); color: #fff; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">âˆ’</button>
              <span style="min-width: 30px; text-align: center; color: #7c3aed; font-weight: 700;">${robotFrameworkCount}</span>
              <button onclick="addRobotFramework('${country.name}')" style="background: rgba(124, 58, 237, 0.5); border: 1px solid rgba(124, 58, 237, 0.7); color: #fff; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">+</button>
              <span style="font-size: 0.7rem; color: #a78bfa; margin-left: 4px; white-space: nowrap;">+50Kæœºå™¨äºº</span>
            </div>
          </div>
        `;
        priceGrid.appendChild(priceCard);
      });
      
      // Power Chart with virtual frameworks
      const powerChart = echarts.init(document.getElementById('powerChart'));
      const powerData = countriesData.map(c => c.power);
      const powerFrameworkData = countriesData.map(c => virtualFrameworks[c.name].power * POWER_PER_FRAMEWORK);
      
      const powerOption = {
        backgroundColor: 'transparent',
        grid: { top: 30, right: 30, bottom: 60, left: 60 },
        tooltip: {
          backgroundColor: 'rgba(0,0,0,0.7)',
          borderColor: 'rgba(255,255,255,0.2)',
          textStyle: { color: '#fff' }
        },
        xAxis: {
          type: 'category',
          data: countriesData.map(c => c.name),
          axisLabel: { color: '#aaa' },
          axisLine: { lineStyle: { color: 'rgba(255,255,255,0.1)' } }
        },
        yAxis: {
          type: 'value',
          axisLabel: { color: '#aaa' },
          axisLine: { lineStyle: { color: 'rgba(255,255,255,0.1)' } },
          splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
        },
        series: [
          {
            name: 'åŸºç¡€ç”µåŠ›',
            data: powerData,
            type: 'bar',
            itemStyle: {
              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                { offset: 0, color: '#ff6b6b' },
                { offset: 1, color: '#ff9999' }
              ])
            },
            stack: 'power'
          },
          {
            name: 'è™šæ‹Ÿæ¡†æ¡†',
            data: powerFrameworkData,
            type: 'bar',
            itemStyle: {
              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                { offset: 0, color: 'rgba(255, 107, 107, 0.5)' },
                { offset: 1, color: 'rgba(255, 153, 153, 0.5)' }
              ])
            },
            stack: 'power'
          }
        ]
      };
      powerChart.setOption(powerOption);

      // Robot Chart with virtual frameworks
      const robotChart = echarts.init(document.getElementById('robotChart'));
      const robotData = countriesData.map(c => c.robots);
      const robotFrameworkData = countriesData.map(c => virtualFrameworks[c.name].robots * ROBOTS_PER_FRAMEWORK);
      
      const robotOption = {
        backgroundColor: 'transparent',
        grid: { top: 30, right: 30, bottom: 60, left: 60 },
        tooltip: {
          backgroundColor: 'rgba(0,0,0,0.7)',
          borderColor: 'rgba(255,255,255,0.2)',
          textStyle: { color: '#fff' }
        },
        xAxis: {
          type: 'category',
          data: countriesData.map(c => c.name),
          axisLabel: { color: '#aaa' },
          axisLine: { lineStyle: { color: 'rgba(255,255,255,0.1)' } }
        },
        yAxis: {
          type: 'value',
          axisLabel: { color: '#aaa' },
          axisLine: { lineStyle: { color: 'rgba(255,255,255,0.1)' } },
          splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
        },
        series: [
          {
            name: 'åŸºç¡€æœºå™¨äºº',
            data: robotData,
            type: 'bar',
            itemStyle: {
              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                { offset: 0, color: '#7c3aed' },
                { offset: 1, color: '#a78bfa' }
              ])
            },
            stack: 'robot'
          },
          {
            name: 'è™šæ‹Ÿæ¡†æ¡†',
            data: robotFrameworkData,
            type: 'bar',
            itemStyle: {
              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                { offset: 0, color: 'rgba(124, 58, 237, 0.5)' },
                { offset: 1, color: 'rgba(167, 139, 250, 0.5)' }
              ])
            },
            stack: 'robot'
          }
        ]
      };
      robotChart.setOption(robotOption);
    }

    function updateScenario() {
      // Calculate output based on actual virtual frameworks added by user
      const outputProjection = document.getElementById('outputProjection');
      outputProjection.innerHTML = '';

      countriesData.forEach(country => {
        // Current totals including virtual frameworks
        const currentPower = getTotalPowerForCountry(country);
        const currentRobots = getTotalRobotsForCountry(country);
        
        // Base output
        const baseCountryOutput = country.power * country.robots * country.productivity;
        
        // Current output with frameworks
        const currentCountryOutput = currentPower * currentRobots * country.productivity;
        
        // Output growth percentage
        const outputGrowth = ((currentCountryOutput / baseCountryOutput) - 1) * 100;
        
        const card = document.createElement('div');
        card.className = 'output-card';
        card.innerHTML = `
          <div class="output-card-country">${country.flag} ${country.name}</div>
          <div class="output-card-value">${(currentCountryOutput / baseCountryOutput * 100).toFixed(0)}</div>
          <div class="output-card-label">äº§å‡ºæŒ‡æ•° ${outputGrowth > 0 ? '+' : ''}${outputGrowth.toFixed(1)}%</div>
        `;
        outputProjection.appendChild(card);
      });

      // Output Chart - shows real-time based on virtual frameworks
      const outputChart = echarts.init(document.getElementById('outputChart'));
      const outputData = countriesData.map(country => {
        const baseCountryOutput = country.power * country.robots * country.productivity;
        const currentPower = getTotalPowerForCountry(country);
        const currentRobots = getTotalRobotsForCountry(country);
        const currentCountryOutput = currentPower * currentRobots * country.productivity;
        return (currentCountryOutput / baseCountryOutput) * 100;
      });

      const outputOption = {
        backgroundColor: 'transparent',
        grid: { top: 30, right: 30, bottom: 60, left: 60 },
        tooltip: {
          backgroundColor: 'rgba(0,0,0,0.7)',
          borderColor: 'rgba(255,255,255,0.2)',
          textStyle: { color: '#fff' }
        },
        xAxis: {
          type: 'category',
          data: countriesData.map(c => c.name),
          axisLabel: { color: '#aaa' },
          axisLine: { lineStyle: { color: 'rgba(255,255,255,0.1)' } }
        },
        yAxis: {
          type: 'value',
          axisLabel: { color: '#aaa' },
          axisLine: { lineStyle: { color: 'rgba(255,255,255,0.1)' } },
          splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
        },
        series: [{
          data: outputData,
          type: 'bar',
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: '#ffeb3b' },
              { offset: 1, color: '#ff9800' }
            ])
          }
        }]
      };
      outputChart.setOption(outputOption);
    }

    // Initialize
    window.addEventListener('load', () => {
      switchLang('zh');  // Default to Chinese
    });
  </script>
</body>
</html>
